<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>DataWarrior Installation</title>
  <base href="../">
  <link type="text/css" href="styles.css" rel="stylesheet">
</head>

<body>

<hr align="left" size="2" width="550">
<h2><a name="Installation"></a>Installation And Customization</h2>
<hr align="left" size="2" width="550">

<h3><a name="Installers"></a>Installing DataWarrior</h3>
<p><span class="keyword">DataWarrior</span> installers are available for Linux, Macintosh and Windows.
DataWarrior was written in Java and its complete source code is published under the
<span class="keyword">GNU Public License</span> on <a href="https://github.com/thsa/datawarrior">GitHub.com</a>.
Installers for the three platforms can be downloaded from https://openmolecules.org.
The DataWarrior installation contains various example files and a complete user manual as part of
locally installed application. The same user manual is also available online at https://openmolecules.org.
All installers contain a recent Java runtime environment. You don't need to install Java yourself.</p>

<p>To install <span class="keyword">DataWarrior</span> on Windows just double-click the downloaded datawarrior.msi
file and follow the instructions. Anytime later you may tracelessly uninstall the program using the
<span class="keyword">Control Panel</span>. <span class="keyword">DataWarrior</span> for Windows is
a 64-bit application and includes its own 64-bit Java Runtime environment.
</p>
<p>To install <span class="keyword">DataWarrior</span> on the <span class="keyword">Macintosh</span>
just double-click the downloaded datawarrior.dmg file and drag the <span class="keyword">DataWarrior</span>
application icon onto the Application folder alias icon in the same window.
To launch <span class="keyword">DataWarrior</span> for the first time and depending on the particular version of OSX,
you may need to open the Application folder in the Finder, right click <span class="keyword">DataWarrior</span>
and choose open. Or you may get an error message <i>DataWarrior can not be opened because the developer can not be verified</i>.
In this case press <span class="menu">Cancel</span>, open <span class="keyword">System Preferences</span>,
and go to <span class="keyword">Security and Privacy -> General</span>.
There will be a message about the program that was blocked, with the option to <span class="menu">Open Anyway</span>.
In case you want to de-install the software later, just drag the <span class="keyword">DataWarrior</span>
folder from the application folder into the trash.
</p>
<p>To install <span class="keyword">DataWarrior</span> on <span class="keyword">Linux</span> unpack the
downloaded datawarrior.tar.gz file to any location and run the 'install.sh' script with root privileges.
To later uninstall <span class="keyword">DataWarrior</span> you may run /opt/uninstall with root privileges.
</p>
<br>

<h3>Updating DataWarrior</h3>
<p>If you didn't set the <span class="menu">Update Mode</span> in the <span class="menu">Help</span> menu to
<span class="menu">Never Update</span>, then <span class="keyword">DataWarrior</span> checks when it
is launched, whether an updated version is available. If an update is found, then, depending on your selected
update mode, <span class="keyword">DataWarrior</span> will ask for your permission or just download and save
the update as a 'datawarrior_vxx.xx.xx.jar' file on your hard disk. The exact location depends on the operating
system. The default locations are '/opt/datawarrior/update' on Linux, '/Applications/DataWarrior.app/Contents/Java/update'
on MacOS, and 'C:\\ProgramData\DataWarrior' on Windows. If <span class="keyword">DataWarrior</span> cannot write
files in the default directory, then it may choose another location or ask the user to provide a writable directory
for update files.</p>
<p>In fact, when <span class="keyword">DataWarrior</span> is launched, a small launcher is started first,
which then launches the newest 'datawarrior_vxx.xx.xx.jar' file from the update directory. When downloading
updates, <span class="keyword">DataWarrior</span> will keep two older 'datawarrior_vxx.xx.xx.jar' files in the
update directory. This way you may always return to an older version by removing the newest one or two files.</p>
<br>

<h3><a name="LookAndFeel"></a>Look & Feel</h3>
<p>When <span class="keyword">DataWarrior</span> launches for the first time, it uses the <span class="keyword">Graphite
Look & Feel</span>, which means that all user interface elements and the background are drawn in a dark grayish tone.
This emphasises in particular color-rich views. Since aesthetic perception depends on the individuum,
the <span class="menu">Help</span> menu allows to choose from a couple of different <span class="keyword">Look & Feels</span>.
The chosen <span class="keyword">Look & Feels</span> is stored as part of <span class="keyword">DataWarrior's</span>
settings.</p>
<p align="center"><img src="help/img/installation/laf.jpeg"></p>
<p align="center"><i>Three different Look & Feels on a Macintosh</i></p>

<br>
<h3><a name="HiDPI"></a>Hi-Resolution Monitors</h3>
<p>During recent years computer and monitor manufacturers have introduced monitors with substantially
higher resolutions than what was common before. <span class="keyword">DataWarrior</span> supports
these monitors on all three platforms, but in a slightly different ways, because high resolution
monitors are handled differently on different operating systems. In general user interface elements
as buttons, combo boxes and menu items are enlarged to make up for the smaller pixel size. Therefore,
everything looks much sharper.</p>
<p>On <span class="keyword">Windows</span> the enlargement factor can be defined for all applications
in the <span class="keyword">Display Control Panel</span> under <span class="keyword">Appearance
and Personalization</span>. Under legacy versions of Windows it is also necessary to disable DPI virtualization
for the DataWarrior application. To do so, right-click the name of the DataWarrior executable file,
click Properties, click the Compatibility tab, and then select the box labeled <span class="keyword">Disable
display scaling on high DPI settings</span>.</p>
<p>On Retina displays of the <span class="keyword">Macintosh</span> this factor is predefined as 2.0.
And on <span class="keyword">Linux</span> it depends on the Linux dialect. Sometimes the scaling factor
can be defined in the display settings dialog as it was under Ubuntu with the Unity desktop. On the Gnome
desktop the scaling factor may be defined for all applications using this command:</p>
<p><span class="code">gsettings set org.gnome.desktop.interface text-scaling-factor 1.4</span></p>
<p><span class="keyword">DataWarrior</span> should recognize these settings and increase its fonts and user interface
elements accordingly. This, however cannot be garanteed for all operating systems and version. Therefore,
DataWarrior's <span class="menu">Help</span> menu contains a <span class="menu">User Interface Scaling</span>
option to define a static scaling factor instead of using the default one (not for Macintosh). Alternatively,
on Linux and Macintosh a <span class="keyword">dpifactor</span> can be added as JRE option to the startup settings.
On Macintosh you can add a line like '<string>-Ddpifactor=1.5</string>' to the Info.plist file in
'/Applications/DataWarrior.app/Contents'. On Linux you would need to add '-Ddpifactor=1.5' to the last line of the
'/opt/datawarrior/datawarrior' shell script just after the other '-X...' options.</p>
<br>

<h3><a name="Memory"></a>Memory Settings</h3>
<p>As all Java programs, <span class="keyword">DataWarrior</span> has a predefined maximum memory setting,
which should allow you to work with rather big data files. If these, however, grow into millions of rows,
then you may experience <span class="keyword">Out of memory</span> errors. If your computer has enough physical
memory, then you may increase <span class="keyword">DataWarrior's</span> maximum memory setting the following way:</p>
<p>On <span class="keyword">Linux</span> this can be easily done by updating the batch file that launches
<span class="keyword">DataWarrior</span>. Open a shell and type <span class="code">sudo pico /opt/datawarrior/datawarrior</span>
(if you can't use <span class="code">sudo</span>, then type <span class="code">su</span>, <span class="keyword">Enter</span>
and, when asked for the password, the super-user password. Then type <span class="code">pico /opt/datawarrior/datawarrior</span>.
Look for the <span class="code">-Xmx4096</span> setting in the last line, which defines the maximum memory size.
Increase the number, press <span class="keyword">Ctrl-O</span> and <span class="keyword">Enter</span> to save changes
and <span class="keyword">Ctrl-X</span> to exit the editor.</p>
<p>On the <span class="keyword">Macintosh</span> you do the following: Open a terminal window, type
<span class="code">pico /Applications/DataWarrior.app/Contents/Info.plist</span>. A text editor opens.
Use the cursor keys to move close to the end of the file, where you will find the <span class="code">-Xmx4096M</span>
setting. Increase the number, press <span class="keyword">Ctrl-O</span> and <span class="keyword">Enter</span>
to save changes and <span class="keyword">Ctrl-X</span> to exit the editor.</p>
<p>If you use Windows, the procedure is a little more complicated. You need to patch the DataWarrior.exe
file. For that start a hex-editor or your choice, search the file for the string <span class="code">-Xmx3600m</span>
and increase the number part of it, save the file and you are done.</p>
<br>

</body>
</html>
